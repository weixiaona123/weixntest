"use strict";$(function(){function a(){_hmt.push(["_trackEvent","免费试用","click"]),k.fadeIn(200),l.fadeIn(400)}function b(){k.fadeOut(400),l.fadeOut(400)}function c(){n.remove()}function d(){o.remove()}function e(){p.remove()}function f(a){"default"==a?(d(),e(),l.addClass("js-applyalert-content-five")):"phoneemail"==a?(c(),e(),l.addClass("js-applyalert-content-two")):"email"==a&&(c(),d())}function g(a){return a.length>0?!1:!0}var h=window.location.href,i=!0,j=$(".js-btn-apply"),k=$(".js-applyalert-bg"),l=$(".js-applyalert-content"),m=$(".js-applyalert-goback"),n=$(".js-apply-one"),o=$(".js-apply-two"),p=$(".js-apply-three"),q=$("#js-apply-success"),r=($("#info-form"),$("#textarea"),$("#apply-com")),s=$(".apply-drown-menu"),t=$(".apply-drown-context"),u=$(".js-name"),v=$(".js-product"),w=$("#apply-drown-sel span"),x=$("#apply-mau"),y=$(".mau-input"),z=$("#apply-drown-sel"),A=$("#js-apply-alert"),B=!1,C=!1;adhoc.getExperimentFlags(function(a){window.flag=a.get("form_version"),window.formVersion=a.get("form_version"),"phone"==window.formVersion&&(window.formVersion="phoneemail"),f(formVersion),B=!0,C=!1}),j.click(function(){B?a():C=!0}),k.click(function(){b()}),m.click(function(){b()}),window.checkFormSuccess=function(){var a,b,c,d,e,f=[],g=$("form").serializeArray();$.each(g,function(a,b){f[a]=b.value}),$(".js-apply-one").length>0&&(a=f[0],b=f[1],c=f[2],d=f[3],e=f[4]),$(".js-apply-two").length>0&&(c=f[0],d=f[1]),$(".js-apply-three").length>0&&(d=f[0]),"http://www.appadhoc.com/?hmsr=weixin&hmpl=h5&hmcu=appadhoc&hmkw=intro&hmci=ly"==h&&(formVersion="email"),$.ajax({type:"post",dataType:"json",crossDrmain:!0,contentType:"application/json",url:"https://auth.appadhoc.com/applied_users",data:JSON.stringify({company:a,name:b,email:d,mobile:c,mau:e,version:formVersion}),success:function(){i=!0,afterSuccess(),adhoc.increment("btn_click_success",1)},error:function(){i=!0}})},window.afterSuccess=function(){A.hide(),q.show(),l.addClass("js-applyalert-content-success");var a,b=2;window.CountDown=function(){$("#num").text(b),0==b&&(clearInterval(a),window.location.href="http://www.appadhoc.com/"),b--},a=setInterval(CountDown,1e3)},window.applyFn=function(){if("default"==formVersion){if(window.chekProduct()&&window.chekName()&&window.chekPhone()&&window.checkEmail())return!0}else if("phoneemail"==formVersion){if(window.chekPhone()&&window.checkOnlyEmail())return!0}else if("email"==formVersion&&window.checkOnlyEmail())return!0},window.textChange=function(){chekPhone()};var D,E=document.forms.insightly_web_to_contact,F=(document.getElementById("phone"),document.getElementById("email")),G=document.getElementById("info-form"),H=document.getElementById("textarea");window.chekPhone=function(){return D=E["phones[0].Value"].value.match(/^1[3578]\d{9}$/)?"":"请正确填写您的手机号码",document.getElementById("phone").innerHTML=D,g(D)},window.checkEmail=function(){return D=E["emails[0].Value"].value.match(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/)?"":"请正确填写您的公司邮箱",F.innerHTML=D,g(D)},window.checkOnlyEmail=function(){return D=E["emails[0].Value"].value.match(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/)&&-1==E["emails[0].Value"].value.toLowerCase().indexOf("@126")&&-1==E["emails[0].Value"].value.toLowerCase().indexOf("@163")&&-1==E["emails[0].Value"].value.toLowerCase().indexOf("@qq")&&-1==E["emails[0].Value"].value.toLowerCase().indexOf("@gmail")&&-1==E["emails[0].Value"].value.toLowerCase().indexOf("@hotmail")&&-1==E["emails[0].Value"].value.toLowerCase().indexOf("@sina")&&-1==E["emails[0].Value"].value.toLowerCase().indexOf("@sohu")&&-1==E["emails[0].Value"].value.toLowerCase().indexOf("@yahoo")&&-1==E["emails[0].Value"].value.toLowerCase().indexOf("@139")&&-1==E["emails[0].Value"].value.toLowerCase().indexOf("@foxmail")&&-1==E["emails[0].Value"].value.toLowerCase().indexOf("@outlook")?"":"请正确填写您的公司邮箱",document.getElementById("email").innerHTML=D,g(D)},window.chekName=function(){return D=0==E.FirstName.value.length?"请正确填写您的姓名":"",G.innerHTML=D,g(D)},window.chekProduct=function(){return D=0==E.background.value.length||""==E.background.value?"请正确填写您的公司或产品名称":"",H.innerHTML=D,g(D)},r.on("click",function(){_hmt.push(["_trackEvent","提交申请","click"]);var a=applyFn();a&&(i?(i=!1,checkFormSuccess()):console.log("please click slow"))}),s.click(function(){t.toggle()}),w.on("click",function(){var a=$(this).text();x.text(a),y.val(a),z.fadeOut("slow")}),u.bind("input propertychange",function(){chekName()}),v.bind("input propertychange",function(){chekProduct()})});